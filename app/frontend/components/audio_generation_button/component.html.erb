<!-- Status Badge and Play Button Row -->
<% if audio_exists? %>
  <div class="flex items-center justify-between mb-3">
    <div class="flex items-center gap-3">
      <!-- Status Badge -->
      <%= render StatusBadge::Component.new(status: audio_status.to_sym, size: :small) %>
      
      <!-- Play Button (only for completed audio) -->
      <% if audio_status == "completed" && audio_file_url %>
        <%= render AudioPlayButton::Component.new(content_record: content_record, size: :small) %>
      <% end %>
    </div>
    
    <!-- Audio creation time -->
    <% if audio_info %>
      <span class="text-xs text-gray-500">
        <%= time_ago_in_words(audio_info[:created_at]) %>Ââç
      </span>
    <% end %>
  </div>
<% end %>

<!-- Action Button -->
<div class="flex items-center gap-2">
    <% if audio_status == "completed" || audio_status == "failed" %>
      <!-- Delete Button using ButtonComponent -->
      <%= form_with url: content_audio_path(content_record), method: :delete, local: true do |f| %>
        <%= render Button::Component.new(
          text: button_text,
          variant: button_variant,
          size: button_size,
          disabled: button_disabled?,
          loading: button_loading?,
          type: "submit",
          data: button_data_attributes
        ) do %>
          <% if button_icon %>
            <%= render Icon::Component.new(name: button_icon, size: :sm) %>
          <% end %>
          <span class="ml-1.5"><%= button_text %></span>
        <% end %>
      <% end %>
    <% else %>
      <!-- Generate/Processing Button using ButtonComponent -->
      <%= form_with url: generate_audio_content_path(content_record), method: :post, local: true do |f| %>
        <%= render Button::Component.new(
          text: button_text,
          variant: button_variant,
          size: button_size,
          disabled: button_disabled?,
          loading: button_loading?,
          type: "submit",
          data: button_data_attributes
        ) do %>
          <% if !button_loading? && button_icon %>
            <%= render Icon::Component.new(name: button_icon, size: :sm) %>
          <% end %>
          <span class="<%= 'ml-1.5' if button_icon && !button_loading? %>"><%= button_text %></span>
        <% end %>
      <% end %>
    <% end %>
    
    <!-- Prerequisites hint (when disabled) -->
    <% if !audio_exists? && !can_generate_audio? && prerequisite_errors.any? %>
      <span class="text-xs text-gray-500">
        <%= prerequisite_errors.join(" / ") %>
      </span>
    <% end %>
  </div>