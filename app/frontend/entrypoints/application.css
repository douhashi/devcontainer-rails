@import "tailwindcss";
@import "plyr/dist/plyr.css";

@source "../../views/**/*.{haml,slim,erb}";

:root {
  --header-height: 4rem;
  --sidebar-width: 16rem;
  --sidebar-width-collapsed: 3rem;
}

body {
  @apply bg-gray-900 text-gray-100 min-h-screen;
}

.layout-grid {
  @apply min-h-screen grid;
  grid-template-areas: 
    "header header"
    "sidebar main"
    "footer footer";
  grid-template-rows: var(--header-height) 1fr auto;
  grid-template-columns: var(--sidebar-width) 1fr;
}

.layout-header {
  grid-area: header;
  @apply bg-gray-800 border-b border-gray-700;
}

.layout-sidebar {
  grid-area: sidebar;
  @apply bg-gray-800 border-r border-gray-700;
  transition: width 0.3s ease;
}

.layout-main {
  grid-area: main;
  @apply bg-gray-900 p-6 overflow-y-auto;
}

.layout-footer {
  grid-area: footer;
  @apply bg-gray-800 border-t border-gray-700;
}

/* Plyr.js dark theme customization */
.plyr {
  @apply rounded-lg;
  background: transparent !important;
}

/* Audio player wrapper - remove white background completely */
.plyr--audio {
  max-width: 400px; /* Increased from 320px for better seek bar visibility */
  min-height: 48px;
  background: transparent !important; /* Force transparent background */
  @apply rounded-lg;
}

/* Controls container - ensure dark theme */
.plyr--audio .plyr__controls {
  @apply border border-gray-600 rounded-lg p-2;
  background: rgb(31 41 55 / 1) !important; /* gray-800 - force override */
  color: rgb(209 213 219 / 1) !important; /* gray-300 */
}

/* Control buttons */
.plyr__control {
  @apply text-gray-300 transition-colors duration-200;
}

.plyr__control:hover {
  @apply text-white bg-gray-700;
}

.plyr__control:focus {
  @apply text-white bg-gray-700 outline-none ring-2 ring-blue-500/50;
}

.plyr__control--pressed,
.plyr__control[aria-pressed="true"] {
  @apply text-blue-400 bg-gray-700;
}

/* Play button */
.plyr__control[data-plyr="play"] {
  @apply text-gray-300 hover:text-white hover:bg-gray-700;
}

.plyr__control[data-plyr="play"]:focus {
  @apply ring-2 ring-blue-500/50;
}

/* Progress bar container - Fix overlapping issue */
.plyr__progress {
  @apply bg-gray-600 rounded-full h-1;
  background: rgb(75 85 99 / 1); /* gray-600 */
  position: relative;
}

/* Ensure proper layering of seek input and progress elements */
.plyr__progress input[type="range"] {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  margin: 0;
  padding: 0;
  cursor: pointer;
  opacity: 0;
  z-index: 3; /* Above progress bar */
}

/* Style the actual progress element */
.plyr__progress__container {
  position: relative;
  height: 100%;
  background: rgb(75 85 99 / 1); /* gray-600 */
  border-radius: 9999px;
  overflow: hidden;
}

/* Played progress */
.plyr__progress__played {
  height: 100%;
  background: rgb(59 130 246 / 1); /* blue-500 */
  border-radius: 9999px;
  position: absolute;
  left: 0;
  top: 0;
  z-index: 1;
}

/* Buffer progress */
.plyr__progress__buffer {
  height: 100%;
  background: rgb(156 163 175 / 0.5); /* gray-400 with opacity */
  position: absolute;
  left: 0;
  top: 0;
  z-index: 0;
}

/* Seek tooltip */
.plyr__progress input[type="range"]::-webkit-slider-thumb {
  @apply appearance-none bg-blue-500 rounded-full cursor-pointer border-0 shadow-lg;
  background: rgb(59 130 246 / 1); /* blue-500 */
  width: 12px;
  height: 12px;
  z-index: 4;
  opacity: 1;
  transition: all 0.2s ease;
}

.plyr__progress input[type="range"]::-moz-range-thumb {
  @apply bg-blue-500 rounded-full cursor-pointer border-0 shadow-lg;
  background: rgb(59 130 246 / 1); /* blue-500 */
  width: 12px;
  height: 12px;
  z-index: 4;
  opacity: 1;
  transition: all 0.2s ease;
}

/* Hover state for thumb */
.plyr__progress:hover input[type="range"]::-webkit-slider-thumb {
  width: 14px;
  height: 14px;
  background: rgb(37 99 235 / 1); /* blue-600 */
}

.plyr__progress:hover input[type="range"]::-moz-range-thumb {
  width: 14px;
  height: 14px;
  background: rgb(37 99 235 / 1); /* blue-600 */
}

/* Track styling for seek bar */
.plyr__progress input[type="range"]::-webkit-slider-runnable-track {
  @apply bg-transparent;
  height: 100%;
}

.plyr__progress input[type="range"]::-moz-range-track {
  @apply bg-transparent;
  height: 100%;
}

/* Legacy support for older progress elements */
.plyr__progress::-webkit-progress-bar {
  @apply bg-gray-600 rounded-full;
  background: rgb(75 85 99 / 1); /* gray-600 */
}

.plyr__progress::-webkit-progress-value {
  @apply bg-blue-500 rounded-full transition-all duration-200;
  background: rgb(59 130 246 / 1); /* blue-500 */
}

.plyr__progress::-moz-progress-bar {
  @apply bg-blue-500 rounded-full;
  background: rgb(59 130 246 / 1); /* blue-500 */
}

/* Volume controls - optimize size */
.plyr__volume {
  max-width: 80px; /* Limit volume control width */
  @apply bg-gray-600 rounded-full;
  background: rgb(75 85 99 / 1); /* gray-600 */
}

.plyr__volume--value {
  @apply bg-blue-500 rounded-full;
  background: rgb(59 130 246 / 1); /* blue-500 */
}

.plyr__volume input[type="range"] {
  max-width: 60px; /* Limit volume slider width */
  @apply bg-gray-600;
  background: rgb(75 85 99 / 1); /* gray-600 */
}

.plyr__volume input[type="range"]::-webkit-slider-thumb {
  @apply bg-blue-500 border-0 rounded-full cursor-pointer;
  background: rgb(59 130 246 / 1); /* blue-500 */
}

.plyr__volume input[type="range"]::-moz-range-thumb {
  @apply bg-blue-500 border-0 rounded-full cursor-pointer;
  background: rgb(59 130 246 / 1); /* blue-500 */
}

/* Time display */
.plyr__time {
  @apply text-gray-300 text-xs font-mono;
}

/* Tooltip styling */
.plyr__tooltip {
  @apply bg-gray-700 text-white text-xs px-2 py-1 rounded border border-gray-600;
}

/* Mute button */
.plyr__control[data-plyr="mute"] {
  @apply text-gray-300 hover:text-white hover:bg-gray-700;
}

.plyr__control[data-plyr="mute"][aria-pressed="true"] {
  @apply text-red-400 bg-gray-700;
}

/* Range inputs */
.plyr input[type="range"] {
  @apply bg-gray-600;
  background: rgb(75 85 99 / 1); /* gray-600 */
}

.plyr input[type="range"]::-webkit-slider-track {
  @apply bg-gray-600 rounded-full;
  background: rgb(75 85 99 / 1); /* gray-600 */
}

.plyr input[type="range"]::-webkit-slider-thumb {
  @apply appearance-none bg-blue-500 rounded-full cursor-pointer border-0;
  background: rgb(59 130 246 / 1); /* blue-500 */
  width: 16px;
  height: 16px;
}

.plyr input[type="range"]::-moz-range-track {
  @apply bg-gray-600 rounded-full border-0;
  background: rgb(75 85 99 / 1); /* gray-600 */
}

.plyr input[type="range"]::-moz-range-thumb {
  @apply bg-blue-500 rounded-full cursor-pointer border-0;
  background: rgb(59 130 246 / 1); /* blue-500 */
  width: 16px;
  height: 16px;
}

/* Focus states for accessibility */
.plyr input[type="range"]:focus {
  @apply outline-none;
}

.plyr input[type="range"]:focus::-webkit-slider-thumb {
  @apply ring-2 ring-blue-500/50;
}

.plyr input[type="range"]:focus::-moz-range-thumb {
  @apply ring-2 ring-blue-500/50;
}

/* Tablet responsive styles */
@media (min-width: 768px) and (max-width: 1024px) {
  /* Audio player tablet optimizations */
  .plyr--audio {
    max-width: 350px; /* Intermediate width for tablets */
  }

  /* Show volume control but optimize size */
  .plyr--audio .plyr__volume {
    max-width: 60px; /* Smaller volume control for tablets */
  }

  /* Comfortable touch targets for tablets */
  .plyr--audio .plyr__control {
    min-width: 40px;
    min-height: 40px;
  }

  /* Medium progress bar for tablets */
  .plyr--audio .plyr__progress {
    height: 5px;
  }

  /* Adjust thumb size for tablets */
  .plyr__progress input[type="range"]::-webkit-slider-thumb {
    width: 14px;
    height: 14px;
  }

  .plyr__progress input[type="range"]::-moz-range-thumb {
    width: 14px;
    height: 14px;
  }

  /* Optimize time display for tablets */
  .plyr--audio .plyr__time {
    @apply text-xs font-mono;
  }
}

/* Mobile responsive styles */
@media (max-width: 767px) {
  .layout-grid {
    grid-template-areas: 
      "header"
      "main"
      "footer";
    grid-template-columns: 1fr;
    grid-template-rows: var(--header-height) 1fr auto;
  }
  
  .layout-sidebar {
    @apply fixed left-0 top-16 h-screen z-40 transform -translate-x-full;
    width: var(--sidebar-width);
  }
  
  .layout-sidebar.open {
    @apply translate-x-0;
  }

  /* Audio player mobile optimizations */
  .plyr--audio {
    max-width: 100%; /* Full width on mobile */
  }

  /* Hide volume control on mobile to save space */
  .plyr--audio .plyr__volume {
    display: none;
  }

  /* Larger touch targets for mobile */
  .plyr--audio .plyr__control {
    min-width: 44px;
    min-height: 44px;
  }

  /* Adjust progress bar for better mobile interaction */
  .plyr--audio .plyr__progress {
    height: 6px; /* Slightly larger for easier touch */
  }

  /* Larger thumb for mobile touch targets */
  .plyr__progress input[type="range"]::-webkit-slider-thumb {
    width: 16px;
    height: 16px;
  }

  .plyr__progress input[type="range"]::-moz-range-thumb {
    width: 16px;
    height: 16px;
  }

  /* Hover state on mobile (for touch feedback) */
  .plyr__progress:active input[type="range"]::-webkit-slider-thumb {
    width: 18px;
    height: 18px;
  }

  .plyr__progress:active input[type="range"]::-moz-range-thumb {
    width: 18px;
    height: 18px;
  }

  /* Adjust time display for mobile */
  .plyr--audio .plyr__time {
    @apply text-xs;
  }
}

/* Authentication layout styles */
.auth-header {
  @apply bg-gray-900 border-b border-gray-700;
}

.auth-content {
  @apply bg-gray-800 rounded-lg shadow-xl p-8;
}

/* Dark theme form inputs for auth pages */
.auth-content input[type="email"],
.auth-content input[type="password"],
.auth-content input[type="text"] {
  @apply bg-gray-700 border-gray-600 text-gray-100 placeholder-gray-400;
  @apply focus:border-blue-500 focus:ring-blue-500;
}

.auth-content label {
  @apply text-gray-300;
}

.auth-content .form-check-input {
  @apply bg-gray-700 border-gray-600;
}

.auth-content .form-check-label {
  @apply text-gray-300;
}
