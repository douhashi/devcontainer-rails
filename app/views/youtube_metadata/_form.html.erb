<%= form_with(
  model: youtube_metadata,
  url: youtube_metadata.persisted? ? content_youtube_metadata_path(content) : content_youtube_metadata_path(content),
  method: youtube_metadata.persisted? ? :patch : :post,
  local: false,
  data: { turbo_stream: true },
  class: "space-y-4"
) do |form| %>
  <% if youtube_metadata.errors.any? %>
    <div id="error_explanation" class="bg-red-900 border border-red-600 text-red-200 px-4 py-3 rounded">
      <h2 class="font-semibold mb-2"><%= pluralize(youtube_metadata.errors.count, "error") %> prohibited this YouTube metadata from being saved:</h2>
      <ul class="list-disc list-inside">
        <% youtube_metadata.errors.full_messages.each do |message| %>
          <li><%= message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <!-- タイトル -->
  <div class="field">
    <%= form.label :title, YoutubeMetadata.human_attribute_name(:title), class: "block text-sm font-medium text-gray-300 mb-2" %>
    <%= form.text_field :title,
                        class: "w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-blue-500",
                        placeholder: "YouTube動画のタイトルを入力" %>
  </div>

  <!-- 英語説明 -->
  <div class="field">
    <%= form.label :description_en, YoutubeMetadata.human_attribute_name(:description_en), class: "block text-sm font-medium text-gray-300 mb-2" %>
    <%= form.text_area :description_en,
                       rows: 4,
                       class: "w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-blue-500",
                       placeholder: "English description for YouTube video" %>
  </div>

  <!-- 日本語説明 -->
  <div class="field">
    <%= form.label :description_ja, YoutubeMetadata.human_attribute_name(:description_ja), class: "block text-sm font-medium text-gray-300 mb-2" %>
    <%= form.text_area :description_ja,
                       rows: 4,
                       class: "w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-blue-500",
                       placeholder: "YouTube動画の日本語説明を入力" %>
  </div>

  <!-- ハッシュタグ -->
  <div class="field">
    <%= form.label :hashtags, YoutubeMetadata.human_attribute_name(:hashtags), class: "block text-sm font-medium text-gray-300 mb-2" %>
    <%= form.text_field :hashtags,
                        class: "w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-blue-500",
                        placeholder: "#lofi #bgm #music" %>
    <p class="text-xs text-gray-500 mt-1">スペース区切りで複数のハッシュタグを入力できます</p>
  </div>

  <!-- ステータス -->
  <div class="field">
    <%= form.label :status, YoutubeMetadata.human_attribute_name(:status), class: "block text-sm font-medium text-gray-300 mb-2" %>
    <% available_statuses = youtube_metadata.persisted? ? youtube_metadata.next_available_statuses : YoutubeMetadata.status.values %>
    <%= form.select :status,
                    options_for_select(
                      available_statuses.map do |status|
                        [I18n.t("enumerize.youtube_metadata.status.#{status}"), status]
                      end,
                      youtube_metadata.status
                    ),
                    {},
                    {
                      class: "w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:border-blue-500"
                    } %>
    <% unless available_statuses.size == YoutubeMetadata.status.values.size %>
      <p class="text-xs text-gray-400 mt-1">
        現在の状態から変更可能なステータスのみ表示されています
      </p>
    <% end %>
  </div>

  <!-- アクション -->
  <div class="flex justify-end gap-2 pt-4">
    <button type="button"
            data-controller="modal"
            data-action="click->modal#close"
            class="px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors">
      キャンセル
    </button>

    <%= form.submit youtube_metadata.persisted? ? "更新" : "作成",
                    class: "px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors" %>
  </div>
<% end %>